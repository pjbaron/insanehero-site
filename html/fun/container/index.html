<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
        <title>Roguish</title>
        <style>
            html, body {
                overflow: hidden;
                width: 100%;
                height: 100%;
                margin: 0;
                padding: 0;
                background: #111;
                border: none;
            }

            #renderCanvas {
                width: 100%;
                height: 100%;
                touch-action: none;
            }
        </style>        

        <!-- remote libraries -->
        <script type="text/javascript" src="https://cdn.babylonjs.com/babylon.js"></script>
        <script type="text/javascript" src="https://cdn.babylonjs.com/inspector/babylon.inspector.bundle.js"></script>
        <script type="text/javascript" src="https://cdn.babylonjs.com/loaders/babylonjs.loaders.min.js"></script>
        <script type="text/javascript" src="https://cdn.babylonjs.com/materialsLibrary/babylonjs.materials.min.js"></script>
        <script type="text/javascript" src="https://cdn.babylonjs.com/postProcessesLibrary/babylonjs.postProcess.min.js"></script>
        <script type="text/javascript" src="https://cdn.babylonjs.com/gui/babylon.gui.min.js"></script>
        <script type="text/javascript" src="https://cdn.babylonjs.com/proceduralTexturesLibrary/babylonjs.proceduralTextures.min.js"></script>
        <script type="text/javascript" src="https://cdn.babylonjs.com/serializers/babylonjs.serializers.min.js"></script>
        <script type="text/javascript" src="https://unpkg.com/earcut@2.1.1/dist/earcut.min.js"></script>
        <script src="https://code.jquery.com/pep/0.4.3/pep.js"></script>

        <!-- project source static classes -->
        <script type="text/javascript" src="src/Keys.js"></script>

        <!-- project data source -->
        <script type="text/javascript" src="src/ImageFiles.js"></script>
        <script type="text/javascript" src="src/WorldData.js"></script>
        <script type="text/javascript" src="src/PopulationData.js"></script>

        <!-- project source -->
        <script type="text/javascript" src="src/Preloader.js"></script>
        <script type="text/javascript" src="src/Main.js"></script>
        <script type="text/javascript" src="src/Titles.js"></script>
        <script type="text/javascript" src="src/Game.js"></script>
        <script type="text/javascript" src="src/Container.js"></script>
        <script type="text/javascript" src="src/World.js"></script>
        <script type="text/javascript" src="src/Population.js"></script>
        <script type="text/javascript" src="src/Entity.js"></script>
        <script type="text/javascript" src="src/Sprite.js"></script>
        <script type="text/javascript" src="src/Graphics.js"></script>
        <script type="text/javascript" src="src/MapCreate.js"></script>
        <script type="text/javascript" src="lib/BuildFromPlan.js"></script>
        <script type="text/javascript" src="src/ModelCache.js"></script>

    </head>


    <body>

        <canvas id="renderCanvas" touch-action="none"></canvas>

        <script type="text/javascript">

            "use strict";
            
            var props = {};
            for(var p in window) props[p] = p;

            // global variables (added to 'window')
            var canvas = document.getElementById("renderCanvas");
            // NOTE: don't getContext for this canvas, doing so will block many graphics engines (BabylonJS for one)
            var rafID = 0;

            var main = new Main();
            main.create();

            // wait for load complete
            document.addEventListener('DOMContentLoaded', function()
            {
                // add an update timer
                var vendors = [
                    'ms',
                    'moz',
                    'webkit',
                    'o'
                ];

                for (var x = 0; x < vendors.length && !window.requestAnimationFrame; x++)
                {
                    window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];
                    window.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame'];
                }

                // handle the timer
                var onLoop = function ()
                {
                	// schedule the next timer
            	    rafID = window.requestAnimationFrame(onLoop);

            	    // update the current demo
                    if (main && !main.update())
                    {
                        main.destroy();
                        main = null;
                    }
                };

                // start the timer
                rafID = window.requestAnimationFrame(onLoop);
            }, false);

        </script>

    </body>
</html>
